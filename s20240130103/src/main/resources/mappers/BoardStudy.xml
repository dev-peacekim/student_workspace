<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.blackberry.s20240130103.BoardStudyMapper">
	<insert id="ykmBoardStudyPost" parameterType="YkmBoardComm">
		INSERT 
		INTO BOARD_COMM
		VALUES ( SEQ_BOARD_COMM.NEXTVAL, #{cboard_title}, #{cboard_content}, 0, sysdate, #{user_no}, 0, 200, 10, 400, 10, null )
	</insert>
	
	<select id="ykmSpreadList" resultType="YkmBoardComm">
		SELECT B.*, R.REPLYCNT, U.USER_ID
		FROM BOARD_COMM B
		LEFT JOIN ( SELECT CBOARD_NO, 
					COUNT(*) AS REPLYCNT 
					FROM BOARD_COMM_REPLY BCR 
					GROUP BY CBOARD_NO
					) R ON B.CBOARD_NO = R.CBOARD_NO
		LEFT JOIN USERS U ON U.USER_NO = B.USER_NO
	</select>
	
	<select id="ykmRenterPost" resultType="YkmBoardComm">
		
	</select>
</mapper>